<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
			integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
			crossorigin=""
		/>
		<script
			src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
			integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
			crossorigin=""
		></script>
		<style>
			#map {
				width: 600px;
				height: 600px;
			}
			video {
				max-width: 100%;
			}
			.my-div-icon {
				width: 50px;
				height: 50px;
				background: red;
			}
		</style>
	</head>
	<body>
		<button id="btn">Toggle</button> <span class="text"></span>
		<div id="map"></div>
		<script>
			const map = L.map('map');
			let enabled = true;

			const btn = document.querySelector('#btn');
			btn.addEventListener('click', update);

			const text = document.querySelector('.text');

			const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 19,
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
			}).addTo(map);

			const svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
			svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
			svgElement.setAttribute('viewBox', '0 0 200 200');
			svgElement.innerHTML =
				'<rect width="200" height="200"/><rect x="75" y="23" width="50" height="50" style="fill:red"/><rect x="75" y="123" width="50" height="50" style="fill:#0013ff"/>';
			const latLngBounds = L.latLngBounds([
				[32, -130],
				[13, -100]
			]);

			map.fitBounds(latLngBounds);

			let svgOverlay;

			update();

			function update() {
				let opacity = enabled ? 0.5 : 1;
				text.innerHTML = enabled ? 'true' : 'false';
				if (svgOverlay) svgOverlay.remove();

				svgOverlay = L.svgOverlay(svgElement, latLngBounds, {
					opacity,
					interactive: true
				}).addTo(map);

				svgOverlay.setOpacity(opacity);
				enabled = !enabled;
			}
		</script>
	</body>
</html>
